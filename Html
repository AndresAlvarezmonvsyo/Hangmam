<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
    <link rel="shortcut icon" href="img/favicon.png" />
    <title>Hangman Game</title>

    <link href="https://fonts.googleapis.com/css?family=Comfortaa|Cousine|Fira+Mono|Handlee|Itim|Oxygen+Mono|Varela+Round" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <link href="css/index.css" rel="stylesheet" type="text/css">
    <link href="css/main.css" rel="stylesheet" type="text/css">

    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <style>
     /* General */
html {
  font-family: sans-serif;
  line-height: 1.15;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  height: 100%;
  color: #404040;
  font: 400 1em/1.4 'Open Sans', sans-serif;
}

body {
  margin: 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  height: 100%;
  min-width: 300px;
}

article, aside, footer, header, nav, section, main {
  display: block;
}

*, :after, :before {
  box-sizing: border-box;
}

@media (-webkit-min-device-pixel-ratio:1.5), (min-resolution:1.5dppx), (min-resolution:144dpi) {
  html {
    font-weight: 300;
  }
}

h1 {
  font-weight: 300;
  font-size: 2em;
  -webkit-font-kerning: normal;
  line-height: 1;
  margin: .25em 0 .75em;
}

@media (min-width:640px) {
  h1 {
    font-size: 2.5em;
    margin: 0.6em 0;
  }
}

h2 {
  font-size: 1.333em;
  margin: 0.2em 0;
}

h2, h3 {
  font-weight: 600;
}

h3 {
  font-size: 1em;
}

h3, p, pre {
  margin: 0 0 1.5em;
}

.Error {
  padding: 1em 1.5em;
  background: #c00;
  color: #fff;
  font-weight: 700;
  text-align: center;
}

/* Header */
header, footer {
  -webkit-box-flex: 0;
  -webkit-flex: none;
  -ms-flex: none;
  flex: none;
  font-family: 'Comfortaa', cursive;
}

.header {
  padding: 1em;
  background-color: hsla(31, 15%, 50%, .1);
  text-align: center;
  font-size: 1.1em;
}

@media (min-width:640px) {
  .header {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
  }
  .header, .header .titles {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
  }
  .header .titles {
    -webkit-box-align: baseline;
    -webkit-align-items: baseline;
    -ms-flex-align: baseline;
    align-items: baseline;
  }
  .header .title {
    font-size: 1.5em;
  }
  .header .subtitle {
    margin: 0 0.6em 0.2em;
    font-size: .8em;
    font-weight: 300;
    color: gray;
  }
}

.title {
  margin: 0 0 .15em;
  font-size: 1.8em;
  font-weight: 600;
  line-height: 1;
  word-spacing: .08em;
}

.title i {
  font-family: serif;
  font-style: italic;
  font-weight: 400;
}

.title a {
  border: 0;
  color: inherit;
  font-weight: inherit;
}

.title a:active, .title a:focus, .title a:hover {
  text-decoration: none;
}

@media (min-width:640px) {
  .title {
    font-size: 4em;
  }
}

.subtitle {
  font-size: .8em;
  font-weight: 300;
  white-space: nowrap;
}

@media (max-width:639px) {
  #board-title {
    font-size: 1.1em;
  }

  .title {
    font-size: 1.2em;
  }

  .subtitle {
    display: none;
  }
}

/* Content */
main {
  -webkit-box-flex: 1;
  -webkit-flex: 1 0 auto;
  -ms-flex: 1 0 auto;
  flex: 1 0 auto;
  padding: 0.2em 1.5em 0;
  width: 100%;
}

main:after {
  content: '\00a0';
  display: block;
  margin-top: 1.5em;
  height: 0;
  visibility: hidden;
}

.container {
  display: flex;
  flex-flow: row wrap;
  max-width: 50em;
  margin: 0 auto;
}

.container > * {
  flex: 1 100%;
}

.container h1 {
  flex: 1 100%;
}

.content {
  width: calc(70% - 30px);
  padding: .8em 1em 0;
}

.content:after {
  content: '\00a0';
  display: block;
  margin-top: 1em;
  height: 0;
  visibility: hidden;
}

.aside {
  width: calc(30% - 50px);
  padding: .8em 1em 0;
  margin-left: 0;
}

.aside:after {
  content: '\00a0';
  display: block;
  margin-top: 1em;
  height: 0;
  visibility: hidden;
}

@media all and (min-width: 640px) {
  .content {
    flex: 3 0px;
    order: 1;
  }

  .aside   {
    flex: 1 auto;
    order: 2;
    margin-left: 20px;
  }
}

.space {
  margin-bottom: 1.5em;
}

/* Footer */
footer {
  padding: 10px;
  padding: 0.6rem;
  background: #404040;
  color: #CCC;
  font-size: .75em;
  text-align: center;
}

footer a {
  padding-bottom: 1px;
  border: 0;
  color: #e5e5e5;
  text-decoration: none;
}

footer a:active, footer a:focus, footer a:hover {
  color: #fff;
  text-decoration: underline;
}

.credits {
  margin: 0;
  padding: 0;
}

.credit {
  display: block;
  margin: 0;
}

.social a {
  display: inline-block;
  margin: 0.6em 1em 0;
  vertical-align: top;
}

@media (min-width:576px) {
  .credit {
    display: inline-block;
    margin: 0 .25em;
  }
}

.container .title {
  margin-bottom: 2rem;
  text-align: center;
}

#word {
  margin: 1rem 0;
  text-align: center;
}

aside {
  text-align: center;
}

.letter {
  text-align: center;
  display: inline-block;
  width: 2rem;
  margin: .4rem;
  border-bottom: 1px solid black;
  font-size: 1.75rem;
}

.keyboard {
  width: 2.1rem;
  height: 2.1rem;
  margin-right: .3rem;
  margin-bottom: .3rem;
  font-size: 0.7em;
}

img {
  max-height:65vh;
}

@media screen and (max-width: 640px) {
  img {
    max-height: calc(100vh - 450px);
  }
  .letter {
    font-size: 1.3em;
    width: 1.4rem;
    margin: .3rem;
  }
}
      
    </style>
  </head>
  <body>
    <header>
      <div class="header">
        <div class="titles">
          <h1 class="title">Created : Andres Alvarez </h1>
          <h2 class="subtitle">Full Stack Web Developer</h2>
        </div>
      </div>
    </header>

    <main>
      <div class="container">

        <div class="title">
          <span class="letter">H</span>
          <span class="letter">A</span>
          <span class="letter">N</span>
          <span class="letter">G</span>
          <span class="letter">M</span>
          <span class="letter">A</span>
          <span class="letter">N</span>
        </div>

        <div class="row">
          <content class="col-sm">
            <div id="keyboard"></div>
            <div id="word"></div>
          </content>
          <aside class="col-sm">
            <img class="img-fluid" src="https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g0.jpg" alt="Gallows">
          </aside>
        </div>
      </div>
    </main>
    <footer>
      <span class="social">
        <a href="https://github.com/gustavoparolin" title="Source code at GitHub" target="_blank"><i class="fab fa-github fa-2x"></i></a>
      </span>
      <span class="social">
        <a href="https://www.facebook.com/profile.php?id=100054487284643" title="Social perfil at Facebook" target="_blank"><i class="fab fa-facebook-square fa-2x"></i></a>
      </span>
          </span>
      </div>
    </footer>
    
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
  <script>
    const wordsBank = "martillo promesa maníaco cuerda gusto estante tonto emocionar riel liberar disfrutar comercio tontos chica palos fingir aliviado pepinillo voleibol plato perforar panorámico nombre inmóvil llorar triste conocimiento agua aplastar producir ñame grande cuidado observar nombre enorme jadear madera insidioso tarifa bonita paleta húmeda nación baile colorido rizado parque infantil feroz justo pistola calmar abundante rastro nido lujoso batalla nervudo nariz roto apretado reducir tormentoso sin hogar altivo mirada examen nervioso broma fijar simplista nivel pintura santo babosa gratis arañas alambre obtenible monótono tesseract cambiar picante ingenioso explicar demora murmurar lánguido abatido perturbado lento romántico leyenda malgastar regla lista ambiguo presente teléfono mantequilla";

const hangmanImages = [
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g0.jpg",
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g1.jpg",
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g2.jpg",
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g3.jpg",
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g4.jpg",
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g5.jpg",
  "https://raw.githubusercontent.com/gustavoparolin/hangman/master/img/g6.jpg",
];

$(document).ready(function() {
  const words = wordsBank.toUpperCase().split(' ');

  let chooseOne = 0;
  let mysteryWord = [];
  let myWord = [];
  let strWord = '';
  let correctLetters = [];
  let wrongLetters = [];
  let wrongTryCounter = 0;

  // Crear el teclado
  for (let i = 65; i <= 90; i++){
    $('#keyboard').append(
      `<button id="${String.fromCharCode(i)}" class="btn btn-outline-secondary keyboard">${String.fromCharCode(i)}</button>`
    );
  }

  newGame();

  function newGame() {
    chooseOne = Math.floor(Math.random() * words.length);
    mysteryWord = words[chooseOne].split('');
    myWord = [];
    strWord = '';
    correctLetters = [];
    wrongLetters = [];
    wrongTryCounter = 0;

    // Limpiar el teclado
    for (let i = 65; i <= 90; i++){
      $(`#${String.fromCharCode(i)}`).removeClass().addClass('btn btn-outline-secondary keyboard');
    }

    // Crear la palabra misteriosa
    buildMisteryWord();
  }

  // Crear la palabra oculta
  function buildMisteryWord() {
    strWord = '';
    myWord = [];
    for (let w = 0; w <= mysteryWord.length - 1; w++){
      if (correctLetters.includes(mysteryWord[w])) {
        myWord.push(mysteryWord[w]);
        strWord += `<span class="letter">${mysteryWord[w]}</span>`;
      } else {
        strWord += `<span class="letter">&nbsp;</span>`;
      }
    }
    // Mostrar la palabra debajo del teclado
    $('#word').html(strWord);

    // Comprobar si la palabra actual es igual a la palabra misteriosa. Si sí, llamar a la función gameOver
    if (myWord.length === mysteryWord.length) {
      for (let i = 0; i < myWord.length; i++) {
        if (myWord[i] != mysteryWord[i]) {
          return false;
        }
      }
      gameOver('WON');
    }
  }

  // Escuchar los botones del teclado
  document.querySelectorAll('.btn').forEach(btn => {
    btn.addEventListener('click', event => {
      const {currentTarget} = event;
      let chosenLetter = currentTarget.getAttribute('id');
      guess(chosenLetter);
    })
  })

  // Escuchar las teclas del teclado
  document.addEventListener('keypress', event => {
    const {key, keyCode} = event;
    let chosenLetter = key.toUpperCase();
    // Solo letras
    if ((keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122)) {
      guess(chosenLetter);
    }
  })

  function guess(chosenLetter) {
    if (mysteryWord.includes(chosenLetter)) {
      if (!correctLetters.includes(chosenLetter)) {
        correctLetters.push(chosenLetter);
        $(`#${chosenLetter}`).addClass('btn-success disabled').removeClass('btn-outline-secondary');
        }
    } else {
      if (!wrongLetters.includes(chosenLetter)) {
        wrongLetters.push(chosenLetter);
        $(`#${chosenLetter}`).addClass('btn-danger disabled').removeClass('btn-outline-secondary');
        wrongTryCounter += 1;
        if (wrongTryCounter === 6) {
          gameOver('LOST');
        }
      }
      $('img').attr('src', hangmanImages[wrongTryCounter]);
    }
    buildMisteryWord();
  }

  function gameOver(value) {
    if (value === 'WON') {
      Swal.fire({
        title: '¡Felicidades!',
        text: '¡Has GANADO! ¿Quieres intentarlo de nuevo?',
        icon: 'success',
        confirmButtonText: 'Jugar de Nuevo'
      }).then((result) => {
        if (result.isConfirmed) {
          newGame();
        }
      });
    } else {
      Swal.fire({
        title: '¡Oh no!',
        text: '¡Has PERDIDO! ¡Mejor suerte la próxima vez!',
        icon: 'error',
        confirmButtonText: 'Intentar de Nuevo'
      }).then((result) => {
        if (result.isConfirmed) {
          newGame();
        }
      });
    }
  }

})
   
    </script>
 
  </body>
</html>
